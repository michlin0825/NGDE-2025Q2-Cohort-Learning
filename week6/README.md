Week 6
<br>

What I did
- I developed a todo app using AWS CDK (live at http://todo-app-frontend-cloudchef01-us-cdk-l3.s3-website-us-east-1.amazonaws.com). I used CDK to stand up resources such as API Gateway, Lambda, DDB, and S3, etc. https://shorturl.at/wJgue
- I also built a CI/CD pipeline to roll out new versions triggered by new code commits to my GitHub repo, including a manual review before pushing the codebase to deployment. I again used CDK to provision resources such as SNS Topic, SNS Email Subscription, CodeBuild, CodePipeline, and CodeConnection, etc. https://shorturl.at/mxfXL

<br>

What I learned

Here are the top 3 things to watch out for when developing a serverless application hosted on AWS, along with issue resolution approaches. A longer and more complete version can be found here. https://shorturl.at/aBYeH

- CDK "SUCCESS" ≠ Frontend Deployed
  • CDK shows success but frontend files aren't uploaded to S3
  • **Must include BucketDeployment construct** - always verify
website works
- L3 Constructs Auto-Handle Everything (62% Code Reduction)
  • LambdaRestApi handles CORS automatically - never add manual
OPTIONS methods
  • 40+ lines → 15 lines with built-in AWS best practices
- Asset Bundling Fails Between Local/CI-CD
  • Works locally but breaks in pipeline due to environment
differences
  • **Test both local AND pipeline deployment** - include
validation in buildspec
<br>

## Appendix: Sample Prompt for the Todo App


Create a complete serverless Todo List application using AWS CDK Level 3 (L3) constructs with the following specifications:

### Application Requirements:
- Build a full-stack serverless Todo application with CRUD operations
- Frontend: Static HTML/CSS/JavaScript hosted on S3
- Backend: .NET 8 Lambda function with API Gateway
- Database: DynamoDB with pay-per-request billing
- Infrastructure: AWS CDK using C# with Level 3 constructs for maximum code reduction
- CI/CD: Complete pipeline with GitHub integration and manual approval

### Frontend Specifications:
- Create 3 HTML pages: index.html (list todos), create.html (add todo), edit.html (modify todo)
- Use vanilla JavaScript with modern ES6+ features
- Implement responsive CSS design with clean, modern styling
- Create API client module for backend communication
- Support all CRUD operations: Create, Read, Update, Delete, Toggle completion
- Handle errors gracefully with user-friendly messages

### Backend Specifications:
- .NET 8 Lambda function using ASP.NET Core Web API
- Use Amazon.Lambda.AspNetCoreServer for Lambda integration
- Create TodosController with REST endpoints: GET, POST, PUT, DELETE, PATCH
- Implement Todo model with Id, Title, Description, IsCompleted, CreatedAt properties
- Use AWS SDK for DynamoDB operations (no Entity Framework)
- Configure CORS for cross-origin requests
- Environment variable for DynamoDB table name

### Infrastructure Requirements:
- Use AWS CDK Level 3 (L3) constructs to minimize code (target 60%+ reduction vs L2)
- Create TodoAppStack with:
  * DynamoDB table with string partition key "Id"
  * Lambda function with .NET 8 runtime, 256MB memory, 30s timeout
  * API Gateway using LambdaRestApi L3 construct with automatic CORS
  * S3 static website using custom StaticWebsiteConstruct L3
  * Automatic asset bundling for .NET compilation
  * IAM permissions auto-generated by CDK

### CI/CD Pipeline Requirements:
- Create PipelineStack with 4-stage CodePipeline:
  1. Source: GitHub integration via CodeStar connections
  2. Build: .NET 8 compilation using CodeBuild
  3. Manual Review: Approval gate with SNS email notifications
  4. Deploy: CDK deployment with comprehensive permissions
- Use parameterized configuration for email and GitHub connection
- Include detailed build specifications for both build and deploy phases
- Create S3 bucket for pipeline artifacts with versioning

### CDK Project Structure:
- Program.cs: Main application entry point with context-based deployment modes
- TodoAppStack: Core application infrastructure using L3 constructs
- PipelineStack: CI/CD infrastructure using L2 constructs
- StaticWebsiteConstruct: Custom L3 construct for reusable S3 website pattern
- Support multiple deployment modes: app-only, pipeline, or modern pipeline

### Technical Specifications:
- Target framework: .NET 8
- CDK version: 2.204.0 or latest
- Use C# for all CDK code with comprehensive inline documentation
- Implement cost optimization: pay-per-request DynamoDB, right-sized Lambda
- Include CloudFormation outputs for API URL and website URL
- Support environment variables and CDK context for configuration

### Additional Features:
- Add comprehensive error handling and logging
- Include deployment scripts and verification tools
- Create detailed README with setup instructions
- Add screenshots showing the working application
- Implement security best practices with least-privilege IAM
- Include troubleshooting guide and common issues resolution

### Expected Outcomes:
- Fully functional Todo application accessible via S3 website URL
- REST API endpoints working through API Gateway
- Automated CI/CD pipeline triggered by GitHub commits
- Infrastructure code reduced by 60%+ compared to traditional L2 constructs
- Monthly cost under $1 for development/testing
- Professional documentation and deployment guides

Please create all necessary files, configurations, and documentation to build and deploy this complete serverless application using modern AWS CDK L3 patterns.

---